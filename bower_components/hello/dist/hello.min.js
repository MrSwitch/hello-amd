/*! hellojs - v0.2.2 - 2014-04-27 */
!function(a,b,c){{var d=function(a,c,d){var e="string"==typeof a?b.createElement(a):a;if("object"==typeof c)if("tagName"in c)d=c;else for(var f in c)if(c.hasOwnProperty(f))if("object"==typeof c[f])for(var g in c[f])c[f].hasOwnProperty(g)&&(e[f][g]=c[f][g]);else"html"===f?e.innerHTML=c[f]:/^on/.test(f)?e[f]=c[f]:e.setAttribute(f,c[f]);return"body"===d?!function h(){b.body?b.body.appendChild(e):setTimeout(h,16)}():"object"==typeof d?d.appendChild(e):"string"==typeof d&&b.getElementsByTagName(d)[0].appendChild(e),e},e=function(a,b){var c={},d=0,e=null,f=null;for(f in a)if(a.hasOwnProperty(f))break;if(1===b.length&&"object"==typeof b[0]&&"o!"!=a[f])for(f in b[0])if(a.hasOwnProperty(f)&&f in a)return b[0];for(f in a)if(a.hasOwnProperty(f))if(e=typeof b[d],"function"==typeof a[f]&&a[f].test(b[d])||"string"==typeof a[f]&&(a[f].indexOf("s")>-1&&"string"===e||a[f].indexOf("o")>-1&&"object"===e||a[f].indexOf("i")>-1&&"number"===e||a[f].indexOf("a")>-1&&"object"===e||a[f].indexOf("f")>-1&&"function"===e))c[f]=b[d++];else if("string"==typeof a[f]&&a[f].indexOf("!")>-1)return!1;return c},f=function G(a){if("nodeName"in a)return a;var b,c={};for(b in a)c[b]="object"==typeof a[b]?G(a[b]):a[b];return c},g=function(b,c){var d="HTML"+(b||"").replace(/^[a-z]/,function(a){return a.toUpperCase()})+"Element";return a[d]?c instanceof a[d]:a.Element?c instanceof a.Element&&(!b||c.tagName&&c.tagName.toLowerCase()===b):!(c instanceof Object||c instanceof Array||c instanceof String||c instanceof Number)&&c.tagName&&c.tagName.toLowerCase()===b},h=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];!d.disabled&&d.name&&(b[d.name]="file"===d.type?d:d.value||d.innerHTML)}return b},i=function(b){return"FileList"in a&&b instanceof a.FileList||"File"in a&&b instanceof a.File||"Blob"in a&&b instanceof a.Blob},j=function(b,c,d){return function(e){var f=e.data;if(b("form",f)?f=c(f.elements):"NodeList"in a&&f instanceof NodeList?f=c(f):b("input",f)&&(f=c([f])),d(f)&&(f={file:f}),!("FormData"in a&&f instanceof a.FormData))for(var g in f)if(f.hasOwnProperty(g))if("FileList"in a&&f[g]instanceof a.FileList)1===f[g].length&&(f[g]=f[g][0]);else{if(b("input",f[g])&&"file"===f[g].type)continue;b("input",f[g])||b("select",f[g])||b("textArea",f[g])?f[g]=f[g].value:b(null,f[g])&&(f[g]=f[g].innerHTML||f[g].innerText)}return e.data=f,f}}(g,h,i),k=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},l=function(a){return function(b,c){for(var d=[],e=0;e<c.length;e++)-1===a(b,c[e])&&d.push(c[e]);return d}}(k),m=function(a){return function(){this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent},this.events={},this.on=function(a,b){if(b&&"function"==typeof b)for(var c=a.split(/[\s\,]+/),d=0;d<c.length;d++)this.events[c[d]]=[b].concat(this.events[c[d]]||[]);return this},this.off=function(a,b){return this.findEvents(a,function(a,c){b&&this.events[a][c]!==b||this.events[a].splice(c,1)}),this},this.emit=function(a){var b=Array.prototype.slice.call(arguments,1);b.push(a);for(var c=function(a,c){b[b.length-1]=a,this.events[a][c].apply(this,b)},d=this;d&&d.findEvents;)d.findEvents(a,c),d=d.parent;return this},this.emitAfter=function(){var a=this,b=arguments;return setTimeout(function(){a.emit.apply(a,b)},0),this},this.success=function(a){return this.on("success",a)},this.error=function(a){return this.on("error",a)},this.complete=function(a){return this.on("complete",a)},this.findEvents=function(b,c){var d=b.split(/[\s\,]+/);for(var e in this.events)if(this.events.hasOwnProperty(e)&&a(d,e)>-1)for(var f=0;f<this.events[e].length;f++)c.call(this,e,f)}}}(k),n=function(a,b){for(var c in b)a[c]=b[c]},o=function(b,c){return c=c||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),a[c]=function(){var d=b.apply(this,arguments);if(d)try{delete a[c]}catch(e){}},c},p=function(a,b){return function(c){for(var d in c)if(c.hasOwnProperty(d)&&(a("input",c[d])&&"file"===c[d].type||b(c[d])))return!0;return!1}}(g,i),q=function(a){return function(b){return a("iframe",{src:b,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")}}(d),r=function(a){if(!a)return!0;if(a&&a.length>0)return!1;if(a&&0===a.length)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},s=function(c,d){return function(e,f,g,h){var i,j,k=0,l=b.getElementsByTagName("head")[0],m={error:{message:"server_error",code:"server_error"}},n=function(){k++||a.setTimeout(function(){f(m),l.removeChild(j)},0)},o=d(function(a){return m=a,!0},g);if("function"!=typeof e){var p=e;p=p.replace(new RegExp("=\\?(&|$)"),"="+o+"$1"),e=function(a,b){b(a(p,a))}}e(function(a){for(var b in a)a.hasOwnProperty(b)&&"?"===a[b]&&(a[b]=o)},function(b){j=c("script",{id:o,name:o,src:b,async:!0,onload:n,onerror:n,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&n()}}),a.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(i=c("script",{text:"document.getElementById('"+o+"').onerror();"}),j.async=!1),h&&a.setTimeout(function(){m={error:{message:"timeout",code:"timeout"}},n()},h),l.appendChild(j),i&&l.appendChild(i)})}}(d,o),t=function H(a,b){var c,d={};if("object"==typeof a&&"object"==typeof b){for(c in a)d[c]=a[c],c in b&&(d[c]=H(a[c],b[c]));for(c in b)c in a||(d[c]=b[c])}else d=b;return d},u=function(){function a(){}return Object.create?Object.create:function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}(),v=function(a){var b,c,d={};if("string"==typeof a){if(c=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var e=0;e<c.length;e++)b=c[e].match(/([^=]+)=(.*)/),d[b[1]]=decodeURIComponent(b[2]);return d}var f=a;d=[];for(var g in f)f.hasOwnProperty(g)&&d.push([g,"?"===f[g]?"?":encodeURIComponent(f[g])].join("="));return d.join("&")},w=function(a,c){return function(d,e,f,g,h,i){if("function"!=typeof d){var j=d;d=function(a,b){b(a(j,a))}}var k,l=null,m=[],n=0,o=null,p=0,q=function(a){p++||g(a)};c(q,h);var r;try{r=b.createElement('<iframe name="'+h+'">')}catch(s){r=b.createElement("iframe")}if(r.name=h,r.id=h,r.style.display="none",f&&f.callbackonload&&(r.onload=function(){q({response:"posted",message:"Content was posted"})}),i&&setTimeout(function(){q({error:{code:"timeout",message:"The post operation timed out"}})},i),b.body.appendChild(r),a("form",e)){for(l=e.form,n=0;n<l.elements.length;n++)l.elements[n]!==e&&l.elements[n].setAttribute("disabled",!0);e=l}if(a("form",e))for(l=e,n=0;n<l.elements.length;n++)l.elements[n].disabled||"file"!==l.elements[n].type||(l.encoding=l.enctype="multipart/form-data",l.elements[n].setAttribute("name","file"));else{for(o in e)e.hasOwnProperty(o)&&a("input",e[o])&&"file"===e[o].type&&(l=e[o].form,l.encoding=l.enctype="multipart/form-data");l||(l=b.createElement("form"),b.body.appendChild(l),k=l);var t;for(o in e)if(e.hasOwnProperty(o)){var u=a("input",e[o])||a("textArea",e[o])||a("select",e[o]);if(u&&e[o].form===l)u&&e[o].name!==o&&(e[o].setAttribute("name",o),e[o].name=o);else{var v=l.elements[o];if(t)for(v instanceof NodeList||(v=[v]),n=0;n<v.length;n++)v[n].parentNode.removeChild(v[n]);t=b.createElement("input"),t.setAttribute("type","hidden"),t.setAttribute("name",o),t.value=u?e[o].value:a(null,e[o])?e[o].innerHTML||e[o].innerText:e[o],l.appendChild(t)}}for(n=0;n<l.elements.length;n++)t=l.elements[n],t.name in e||t.getAttribute("disabled")===!0||(t.setAttribute("disabled",!0),m.push(t))}l.setAttribute("method","POST"),l.setAttribute("target",h),l.target=h,d({},function(a){l.setAttribute("action",a),setTimeout(function(){l.submit(),setTimeout(function(){try{k&&k.parentNode.removeChild(k)}catch(a){try{console.error("HelloJS: could not remove iframe")}catch(b){}}for(var c=0;c<m.length;c++)m[c]&&(m[c].setAttribute("disabled",!1),m[c].disabled=!1)},0)},100)})}}(g,o),x=function(a,b){return function(c,d){if(d){var e;for(var f in d)if(c.indexOf(f)>-1){var g="[\\?\\&]"+f+"=[^\\&]*";e=new RegExp(g),c=c.replace(e,"")}}return c+(b(d)?"":(c.indexOf("?")>-1?"&":"?")+a(d))}}(v,r),y=function(){var b=a.location,c=/\/[^\/]+\/\.\.\//g;return function(a){if(!a)return b.href;for(0===a.indexOf("/")?a=b.protocol+(0===a.indexOf("//")?a:"//"+b.host+a):a.match(/^https?\:\/\//)||(a=(b.href.replace(/#.*/,"").replace(/\/[^\/]+$/,"/")+a).replace(/\/\.\//g,"/"));c.test(a);)c.lastIndex=0,a=a.replace(c,"/");return a}}(),z=function(){for(var c=[a.localStorage,a.sessionStorage],d=0,e=c[d++];e;)try{e.setItem(d,d),e.removeItem(d);break}catch(f){e=c[d++]}return e||(e={getItem:function(a){a+="=";for(var c=b.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].replace(/(^\s+|\s+$)/,"");if(e&&0===e.indexOf(a))return e.substr(a.length)}return null},setItem:function(a,c){b.cookie=a+"="+c}}),function(a,b){var c=JSON.parse(e.getItem("hello"))||{};if(a&&"undefined"==typeof b)return c[a];if(a&&""===b)try{delete c[a]}catch(d){c[a]=null}else{if(!a)return c;c[a]=b}return e.setItem("hello",JSON.stringify(c)),c}}(),A=function(a){return function(b){if("object"!=typeof b)return[];for(var c=[],d=0;d<b.length;d++)b[d]&&0!==b[d].length&&-1===a(c,b[d])&&c.push(b[d]);return c}}(k),B=function(a){for(var b,c={},d=/([a-z\-]+):\s?(.*);?/gi;b=d.exec(a);)c[b[1]]=b[2];return c},C=function(a,b,c,d,e){return function(f,g,h,i,j){if("function"!=typeof g){var k=g;g=function(a,b){b(a(k,a))}}var l=new XMLHttpRequest,m=!1;"blob"===f&&(m=f,f="GET"),f=f.toUpperCase(),l.onload=function(){var a=l.response;try{a=JSON.parse(l.responseText)}catch(b){401===l.status&&(a={error:{code:"access_denied",message:l.statusText}})}var c=e(l.getAllResponseHeaders());c.statusCode=l.status,j(a||("DELETE"!==f?{error:{message:"Could not get resource"}}:{}),c)},l.onerror=function(){var a=l.responseText;try{a=JSON.parse(l.responseText)}catch(b){}j(a||{error:{code:"access_denied",message:"Could not get resource"}})};var n,o={};if("GET"===f||"DELETE"===f)a(i)||(o=b(o,i)),i=null;else if(i&&"string"!=typeof i&&!(i instanceof FormData)&&!c(i)){var p=new FormData;for(n in i)i.hasOwnProperty(n)&&(d("input",i[n])?"files"in i[n]&&i[n].files.length>0&&p.append(n,i[n].files[0]):i[n]instanceof Blob?p.append(n,i[n],i.name):p.append(n,i[n]));i=p}return g(o,function(a){if(l.open(f,a,!0),m&&("responseType"in l?l.responseType=m:l.overrideMimeType("text/plain; charset=x-user-defined")),h)for(var b in h)l.setRequestHeader(b,h[b]);l.send(i)}),l}}(r,t,i,g,B),D=function(a,b,c){function d(a,c,d){if(b(a.network,a),!("display"in a&&"page"===a.display)){if(d){var e=a.callback;try{delete a.callback}catch(f){}if(b(a.network,a),!(e in d))return void console.error("Error: Callback missing from parent window, snap!");try{d[e](a)}catch(f){return void console.error("Error thrown whilst executing parent callback, "+e,f)}}try{c.close()}catch(f){}c.addEventListener("load",function(){c.close()}),console.log("Trying to close window")}}return function(b,e){var f=b.location,g=function(a){f.assign?f.assign(a):b.location=a},h=a(c(f.search||""),c(f.hash||""));if(h&&"state"in h){try{var i=JSON.parse(h.state);h=a(h,i)}catch(j){console.error("Could not decode state parameter")}"access_token"in h&&h.access_token&&h.network?(h.expires_in&&0!==parseInt(h.expires_in,10)||(h.expires_in=0),h.expires_in=parseInt(h.expires_in,10),h.expires=(new Date).getTime()/1e3+(h.expires_in||31536e3),d(h,b,e)):"error"in h&&h.error&&h.network&&(h.error={code:h.error,message:h.error_message||h.error_description},d(h,b,e)),h&&h.callback&&"result"in h&&h.result&&h.callback in e&&e[h.callback](JSON.parse(h.result))}else if("oauth_redirect"in h)return void g(decodeURIComponent(h.oauth_redirect));if(h=c(f.search),h.code&&h.state||h.oauth_token&&h.proxy_url){h.redirect_uri=f.href.replace(/[\?\#].*$/,"");var k=JSON.parse(h.state),l=(k.oauth_proxy||h.proxy_url)+"?"+c(h);g(l)}}}(t,z,v),E=function(a){var c=b.createElement("a");return c.href=a,c},F=function(d,e){var f=b.documentElement,g=a.screen;return function(b,h,i,j){var k=a.screenLeft!==c?a.screenLeft:g.left,l=a.screenTop!==c?a.screenTop:g.top,m=a.innerWidth||f.clientWidth||g.width,n=a.innerHeight||f.clientHeight||g.height,o=(m-i)/2+k,p=(n-j)/2+l,q=function(b){var c=a.open(b,"_blank","resizeable=true,height="+j+",width="+i+",left="+o+",top="+p);return c.addEventListener&&c.addEventListener("loadstart",function(b){var f=b.url;if(0===f.indexOf(h)){var g=d(f),i={location:{assign:function(a){c.addEventListener("exit",function(){setTimeout(function(){q(a)},1e3)}),i.close()},search:g.search,hash:g.hash,href:f},close:function(){c.close&&c.close()}};e(i,a)}}),c&&c.focus&&c.focus(),c};return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(b=h+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(b))),q(b)}}(E,D);!function(b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=function(a){return z.use(a)};return i(z,{settings:{redirect_uri:a.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:!0},service:function(a){return"undefined"!=typeof a?u("sync_service",a):u("sync_service")},services:{},use:function(a){var b=p(this);return b.settings=p(this.settings),a&&(b.settings.default_service=a),h.call(b),b},init:function(a,b){if(!a)return this.services;for(var c in a)a.hasOwnProperty(c)&&"object"!=typeof a[c]&&(a[c]={id:a[c]});this.services=o(this.services,a);for(c in this.services)this.services.hasOwnProperty(c)&&(this.services[c].scope=this.services[c].scope||{});return b&&(this.settings=o(this.settings,b),"redirect_uri"in b&&(this.settings.redirect_uri=t(b.redirect_uri))),this},login:function(){function b(a){var b;k||(k=!0,a.error?b="complete error failed auth.failed":(b="complete success login auth.login auth",u(a.network,a),a={network:a.network,authResponse:a}),c.emit(b,a))}var c=this.use(),e=d({network:"s",options:"o",callback:"f"},arguments);c.args=e;var f,h=e.options=o(c.settings,e.options||{});if(e.network=c.settings.default_service=e.network||c.settings.default_service,c.on("complete",e.callback),"string"!=typeof e.network||!(e.network in c.services))return c.emitAfter("error complete",{error:{code:"invalid_network",message:"The provided network was not recognized"}}),c;var i=c.services[e.network],k=!1,m=j(b);e.qs={client_id:i.id,response_type:h.response_type,redirect_uri:h.redirect_uri,display:h.display,scope:"basic",state:{client_id:i.id,network:e.network,display:h.display,callback:m,state:h.state,oauth_proxy:h.oauth_proxy}};var n=u(e.network),p=h.scope;if(p&&"string"!=typeof p&&(p=p.join(",")),p=(p?p+",":"")+e.qs.scope,n&&"scope"in n&&n.scope instanceof String&&(p+=","+n.scope),e.qs.state.scope=v(p.split(/[,\s]+/)).join(","),e.qs.scope=p.replace(/[^,\s]+/gi,function(a){return a in i.scope?i.scope[a]:""}).replace(/[,\s]+/gi,","),e.qs.scope=v(e.qs.scope.split(/,+/)).join(i.scope_delim||","),h.force===!1&&n&&"access_token"in n&&n.access_token&&"expires"in n&&n.expires>(new Date).getTime()/1e3){var q=g(n.scope||[],e.qs.state.scope||[]);if(0===q.length)return c.emit("notice","User already has a valid access_token"),c.emitAfter("complete success login",{network:e.network,authResponse:n}),c}if(e.qs.redirect_uri=t(e.qs.redirect_uri),i.oauth&&(e.qs.state.oauth=i.oauth),e.qs.state=JSON.stringify(e.qs.state),"login"in i&&"function"==typeof i.login&&i.login(e),f=1===parseInt(i.oauth.version,10)?s(h.oauth_proxy,e.qs):s(i.oauth.auth,e.qs),c.emit("notice","Authorization URL "+f),"none"===h.display)l(f);else if("popup"===h.display)var r=y(f,h.redirect_uri,h.window_width||500,h.window_height||500),w=setInterval(function(){r&&r.closed&&(clearInterval(w),b({error:{code:"cancelled",message:"Login has been cancelled"}}))},100);else a.location=f;return c},logout:function(){var a=this.use(),b=d({name:"s",options:"o",callback:"f"},arguments);if(b.options=b.options||{},a.on("complete",b.callback),b.name=b.name||a.settings.default_service,!b.name||b.name in a.services)if(b.name&&u(b.name)){var e=function(c){u(b.name,""),a.emitAfter("complete logout success auth.logout auth",o({network:b.name},c||{}))},f={};if(b.options.force){var g=a.services[b.name].logout;if(g)if("function"==typeof g&&(g=g(e)),"string"==typeof g)l(g),f.force=null,f.message="Logout success on providers site was indeterminate";else if(g===c)return a}e(f)}else if(b.name)a.emitAfter("complete error",{error:{code:"invalid_session",message:"There was no session to remove"}});else{for(var h in a.services)a.services.hasOwnProperty(h)&&a.logout(h);a.service(!1)}else a.emitAfter("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}});return a},getAuthResponse:function(a){return a=a||this.settings.default_service,a&&a in this.services?u(a)||null:(this.emit("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),null)},events:{}}),h.call(z),function(b){var c={},d={};b.on("auth.login, auth.logout",function(a){a&&"object"==typeof a&&a.network&&(c[a.network]=u(a.network)||{})}),function e(){var f=(new Date).getTime()/1e3,g=function(a){b.emit("auth."+a,{network:h,authResponse:i})};for(var h in b.services)if(b.services.hasOwnProperty(h)){if(!b.services[h].id)continue;var i=u(h)||{},j=b.services[h],k=c[h]||{};if(i&&"callback"in i){var l=i.callback;try{delete i.callback}catch(m){}u(h,i);try{a[l](i)}catch(m){}}if(i&&"expires"in i&&i.expires<f){var n=!("autorefresh"in j)||j.autorefresh;!n||h in d&&!(d[h]<f)?n||h in d||(g("expired"),d[h]=!0):(b.emit("notice",h+" has expired trying to resignin"),b.login(h,{display:"none",force:!1}),d[h]=f+600);continue}if(k.access_token===i.access_token&&k.expires===i.expires)continue;!i.access_token&&k.access_token?g("logout"):i.access_token&&!k.access_token?g("login"):i.expires!==k.expires&&g("update"),c[h]=i,h in d&&delete d[h]}setTimeout(e,1e3)}()}(z),x(a,a.opener||a.parent),z.api=function(){function b(b){if(g.data=e(i),"get"===g.method){for(var d,f=/[\?\&]([^=&]+)(=([^&]+))?/gi;d=f.exec(b);)g.data[d[1]]=d[3];b=b.replace(/\?.*/,"")}var l=q[{"delete":"del"}[g.method]||g.method]||{},p=l[b]||l["default"]||b,v=function(b){b=b.replace(/\@\{([a-z\_\-]+)(\|.+?)?\}/gi,function(a,b,c){var d=c?c.replace(/^\|/,""):"";return b in g.data?(d=g.data[b],delete g.data[b]):"undefined"==typeof c&&h.emitAfter("error",{error:{code:"missing_attribute_"+b,message:"The attribute "+b+" is missing from the request"}}),d}),b.match(/^https?:\/\//)||(b=q.base+b);var d={},e=function(a,e){a&&("function"==typeof a?a(d):d=o(d,a));var f=s(b,d||{});h.emit("notice","Request "+f),c(g.network,f,g.method,g.data,q.querystring,e)};if(!m(g.data)&&!("FileList"in a)&&k(g.data))return r(e,g.data,"form"in q?q.form(g):null,t),h;if("delete"===g.method){var f=t;t=function(a,b){f(!a||m(a)?{success:!0}:a,b)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in q)||q.xhr&&q.xhr(g,d))){var i=w(g.method,e,g.headers,g.data,t);i.onprogress=function(a){h.emit("progress",a)},i.upload.onprogress=function(a){h.emit("uploadprogress",a)}}else{if(g.callbackID=j(),"jsonp"in q&&q.jsonp(g,d),"api"in q&&q.api(b,g,{access_token:u.access_token},t))return;"post"===g.method?(d.redirect_uri=h.settings.redirect_uri,d.state=JSON.stringify({callback:g.callbackID}),r(e,g.data,"form"in q?q.form(g):null,t,g.callbackID,h.settings.timeout)):(d=o(d,g.data),d.callback=g.callbackID,n(e,t,g.callbackID,h.settings.timeout))}};"function"==typeof p?p(g,v):v(p)}function c(a,b,c,d,e,f){var g=h.services[a],i=u?u.access_token:null,j=g.oauth&&1===parseInt(g.oauth.version,10)?h.settings.oauth_proxy:null;if(j)return void f(s(j,{path:b,access_token:i||"",then:"get"===c.toLowerCase()?"redirect":"proxy",method:c,suppress_response_codes:!0}));var k={access_token:i||""};e&&e(k),f(s(b,k))}var g=d({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments),h=this.use();f(g),h.args=g,g.method=(g.method||"get").toLowerCase();var i=g.data=g.data||{};h.on("complete",g.callback),g.path=g.path.replace(/^\/+/,"");var l=(g.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(l in h.services){g.network=l;var p=new RegExp("^"+l+":?/?");g.path=g.path.replace(p,"")}g.network=h.settings.default_service=g.network||h.settings.default_service;var q=h.services[g.network];if(!q)return h.emitAfter("complete error",{error:{code:"invalid_network",message:"Could not match the service requested: "+g.network}}),h;g.timeout&&(h.settings.timeout=g.timeout),h.emit("notice","API request "+g.method.toUpperCase()+" '"+g.path+"' (request)",g);var t=function(a,c){if(q.wrap&&(g.path in q.wrap||"default"in q.wrap)){var d=g.path in q.wrap?g.path:"default",e=(new Date).getTime(),f=q.wrap[d](a,c,g);f&&(a=f),h.emit("notice","Processing took"+((new Date).getTime()-e))}h.emit("notice","API: "+g.method.toUpperCase()+" '"+g.path+"' (response)",a);var i=null;a&&"paging"in a&&a.paging.next&&(i=function(){b((a.paging.next.match(/^\?/)?g.path:"")+a.paging.next)}),h.emit("complete "+(!a||"error"in a?"error":"success"),a,i)};if(g.method in q&&g.path in q[g.method]&&q[g.method][g.path]===!1)return h.emitAfter("complete error",{error:{code:"invalid_path",message:"The provided path is not available on the selected network"}});var u=h.getAuthResponse(g.network);return b(g.path),h},a.hello=z,z}(d,e,f,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,C,D,F)}}(window,document),"function"==typeof define&&define.amd&&define(function(){return hello});