/*! hellojs - v0.2.2 - 2014-04-27 */
!function(a,b){{var c=function g(a,b){var c,d={};if("object"==typeof a&&"object"==typeof b){for(c in a)d[c]=a[c],c in b&&(d[c]=g(a[c],b[c]));for(c in b)c in a||(d[c]=b[c])}else d=b;return d},d=function(){for(var c=[a.localStorage,a.sessionStorage],d=0,e=c[d++];e;)try{e.setItem(d,d),e.removeItem(d);break}catch(f){e=c[d++]}return e||(e={getItem:function(a){a+="=";for(var c=b.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].replace(/(^\s+|\s+$)/,"");if(e&&0===e.indexOf(a))return e.substr(a.length)}return null},setItem:function(a,c){b.cookie=a+"="+c}}),function(a,b){var c=JSON.parse(e.getItem("hello"))||{};if(a&&"undefined"==typeof b)return c[a];if(a&&""===b)try{delete c[a]}catch(d){c[a]=null}else{if(!a)return c;c[a]=b}return e.setItem("hello",JSON.stringify(c)),c}}(),e=function(a){var b,c,d={};if("string"==typeof a){if(c=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var e=0;e<c.length;e++)b=c[e].match(/([^=]+)=(.*)/),d[b[1]]=decodeURIComponent(b[2]);return d}var f=a;d=[];for(var g in f)f.hasOwnProperty(g)&&d.push([g,"?"===f[g]?"?":encodeURIComponent(f[g])].join("="));return d.join("&")},f=function(a,b,c){function d(a,c,d){if(b(a.network,a),!("display"in a&&"page"===a.display)){if(d){var e=a.callback;try{delete a.callback}catch(f){}if(b(a.network,a),!(e in d))return void console.error("Error: Callback missing from parent window, snap!");try{d[e](a)}catch(f){return void console.error("Error thrown whilst executing parent callback, "+e,f)}}try{c.close()}catch(f){}c.addEventListener("load",function(){c.close()}),console.log("Trying to close window")}}return function(b,e){var f=b.location,g=function(a){f.assign?f.assign(a):b.location=a},h=a(c(f.search||""),c(f.hash||""));if(h&&"state"in h){try{var i=JSON.parse(h.state);h=a(h,i)}catch(j){console.error("Could not decode state parameter")}"access_token"in h&&h.access_token&&h.network?(h.expires_in&&0!==parseInt(h.expires_in,10)||(h.expires_in=0),h.expires_in=parseInt(h.expires_in,10),h.expires=(new Date).getTime()/1e3+(h.expires_in||31536e3),d(h,b,e)):"error"in h&&h.error&&h.network&&(h.error={code:h.error,message:h.error_message||h.error_description},d(h,b,e)),h&&h.callback&&"result"in h&&h.result&&h.callback in e&&e[h.callback](JSON.parse(h.result))}else if("oauth_redirect"in h)return void g(decodeURIComponent(h.oauth_redirect));if(h=c(f.search),h.code&&h.state||h.oauth_token&&h.proxy_url){h.redirect_uri=f.href.replace(/[\?\#].*$/,"");var k=JSON.parse(h.state),l=(k.oauth_proxy||h.proxy_url)+"?"+c(h);g(l)}}}(c,d,e);!function(b){b(a,a.opener||a.parent)}(f)}}(window,document);