/*! hellojs - v0.2.2 - 2014-04-27 */
!function(a,b,c){{var d=function(a,c,d){var e="string"==typeof a?b.createElement(a):a;if("object"==typeof c)if("tagName"in c)d=c;else for(var f in c)if(c.hasOwnProperty(f))if("object"==typeof c[f])for(var g in c[f])c[f].hasOwnProperty(g)&&(e[f][g]=c[f][g]);else"html"===f?e.innerHTML=c[f]:/^on/.test(f)?e[f]=c[f]:e.setAttribute(f,c[f]);return"body"===d?!function h(){b.body?b.body.appendChild(e):setTimeout(h,16)}():"object"==typeof d?d.appendChild(e):"string"==typeof d&&b.getElementsByTagName(d)[0].appendChild(e),e},e=function(a,b){var c={},d=0,e=null,f=null;for(f in a)if(a.hasOwnProperty(f))break;if(1===b.length&&"object"==typeof b[0]&&"o!"!=a[f])for(f in b[0])if(a.hasOwnProperty(f)&&f in a)return b[0];for(f in a)if(a.hasOwnProperty(f))if(e=typeof b[d],"function"==typeof a[f]&&a[f].test(b[d])||"string"==typeof a[f]&&(a[f].indexOf("s")>-1&&"string"===e||a[f].indexOf("o")>-1&&"object"===e||a[f].indexOf("i")>-1&&"number"===e||a[f].indexOf("a")>-1&&"object"===e||a[f].indexOf("f")>-1&&"function"===e))c[f]=b[d++];else if("string"==typeof a[f]&&a[f].indexOf("!")>-1)return!1;return c},f=function U(a){if("nodeName"in a)return a;var b,c={};for(b in a)c[b]="object"==typeof a[b]?U(a[b]):a[b];return c},g=function(b,c){var d="HTML"+(b||"").replace(/^[a-z]/,function(a){return a.toUpperCase()})+"Element";return a[d]?c instanceof a[d]:a.Element?c instanceof a.Element&&(!b||c.tagName&&c.tagName.toLowerCase()===b):!(c instanceof Object||c instanceof Array||c instanceof String||c instanceof Number)&&c.tagName&&c.tagName.toLowerCase()===b},h=function(a){for(var b={},c=0;c<a.length;c++){var d=a[c];!d.disabled&&d.name&&(b[d.name]="file"===d.type?d:d.value||d.innerHTML)}return b},i=function(b){return"FileList"in a&&b instanceof a.FileList||"File"in a&&b instanceof a.File||"Blob"in a&&b instanceof a.Blob},j=function(b,c,d){return function(e){var f=e.data;if(b("form",f)?f=c(f.elements):"NodeList"in a&&f instanceof NodeList?f=c(f):b("input",f)&&(f=c([f])),d(f)&&(f={file:f}),!("FormData"in a&&f instanceof a.FormData))for(var g in f)if(f.hasOwnProperty(g))if("FileList"in a&&f[g]instanceof a.FileList)1===f[g].length&&(f[g]=f[g][0]);else{if(b("input",f[g])&&"file"===f[g].type)continue;b("input",f[g])||b("select",f[g])||b("textArea",f[g])?f[g]=f[g].value:b(null,f[g])&&(f[g]=f[g].innerHTML||f[g].innerText)}return e.data=f,f}}(g,h,i),k=function(a,b){if(a.indexOf)return a.indexOf(b);for(var c=0;c<a.length;c++)if(a[c]===b)return c;return-1},l=function(a){return function(b,c){for(var d=[],e=0;e<c.length;e++)-1===a(b,c[e])&&d.push(c[e]);return d}}(k),m=function(a){return function(){this.parent={events:this.events,findEvents:this.findEvents,parent:this.parent},this.events={},this.on=function(a,b){if(b&&"function"==typeof b)for(var c=a.split(/[\s\,]+/),d=0;d<c.length;d++)this.events[c[d]]=[b].concat(this.events[c[d]]||[]);return this},this.off=function(a,b){return this.findEvents(a,function(a,c){b&&this.events[a][c]!==b||this.events[a].splice(c,1)}),this},this.emit=function(a){var b=Array.prototype.slice.call(arguments,1);b.push(a);for(var c=function(a,c){b[b.length-1]=a,this.events[a][c].apply(this,b)},d=this;d&&d.findEvents;)d.findEvents(a,c),d=d.parent;return this},this.emitAfter=function(){var a=this,b=arguments;return setTimeout(function(){a.emit.apply(a,b)},0),this},this.success=function(a){return this.on("success",a)},this.error=function(a){return this.on("error",a)},this.complete=function(a){return this.on("complete",a)},this.findEvents=function(b,c){var d=b.split(/[\s\,]+/);for(var e in this.events)if(this.events.hasOwnProperty(e)&&a(d,e)>-1)for(var f=0;f<this.events[e].length;f++)c.call(this,e,f)}}}(k),n=function(a,b){for(var c in b)a[c]=b[c]},o=function(b,c){return c=c||"_hellojs_"+parseInt(1e12*Math.random(),10).toString(36),a[c]=function(){var d=b.apply(this,arguments);if(d)try{delete a[c]}catch(e){}},c},p=function(a,b){return function(c){for(var d in c)if(c.hasOwnProperty(d)&&(a("input",c[d])&&"file"===c[d].type||b(c[d])))return!0;return!1}}(g,i),q=function(a){return function(b){return a("iframe",{src:b,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")}}(d),r=function(a){if(!a)return!0;if(a&&a.length>0)return!1;if(a&&0===a.length)return!0;for(var b in a)if(a.hasOwnProperty(b))return!1;return!0},s=function(c,d){return function(e,f,g,h){var i,j,k=0,l=b.getElementsByTagName("head")[0],m={error:{message:"server_error",code:"server_error"}},n=function(){k++||a.setTimeout(function(){f(m),l.removeChild(j)},0)},o=d(function(a){return m=a,!0},g);if("function"!=typeof e){var p=e;p=p.replace(new RegExp("=\\?(&|$)"),"="+o+"$1"),e=function(a,b){b(a(p,a))}}e(function(a){for(var b in a)a.hasOwnProperty(b)&&"?"===a[b]&&(a[b]=o)},function(b){j=c("script",{id:o,name:o,src:b,async:!0,onload:n,onerror:n,onreadystatechange:function(){/loaded|complete/i.test(this.readyState)&&n()}}),a.navigator.userAgent.toLowerCase().indexOf("opera")>-1&&(i=c("script",{text:"document.getElementById('"+o+"').onerror();"}),j.async=!1),h&&a.setTimeout(function(){m={error:{message:"timeout",code:"timeout"}},n()},h),l.appendChild(j),i&&l.appendChild(i)})}}(d,o),t=function V(a,b){var c,d={};if("object"==typeof a&&"object"==typeof b){for(c in a)d[c]=a[c],c in b&&(d[c]=V(a[c],b[c]));for(c in b)c in a||(d[c]=b[c])}else d=b;return d},u=function(){function a(){}return Object.create?Object.create:function(b){if(1!=arguments.length)throw new Error("Object.create implementation only accepts one parameter.");return a.prototype=b,new a}}(),v=function(a){var b,c,d={};if("string"==typeof a){if(c=a.replace(/^[\#\?]/,"").match(/([^=\/\&]+)=([^\&]+)/g))for(var e=0;e<c.length;e++)b=c[e].match(/([^=]+)=(.*)/),d[b[1]]=decodeURIComponent(b[2]);return d}var f=a;d=[];for(var g in f)f.hasOwnProperty(g)&&d.push([g,"?"===f[g]?"?":encodeURIComponent(f[g])].join("="));return d.join("&")},w=function(a,c){return function(d,e,f,g,h,i){if("function"!=typeof d){var j=d;d=function(a,b){b(a(j,a))}}var k,l=null,m=[],n=0,o=null,p=0,q=function(a){p++||g(a)};c(q,h);var r;try{r=b.createElement('<iframe name="'+h+'">')}catch(s){r=b.createElement("iframe")}if(r.name=h,r.id=h,r.style.display="none",f&&f.callbackonload&&(r.onload=function(){q({response:"posted",message:"Content was posted"})}),i&&setTimeout(function(){q({error:{code:"timeout",message:"The post operation timed out"}})},i),b.body.appendChild(r),a("form",e)){for(l=e.form,n=0;n<l.elements.length;n++)l.elements[n]!==e&&l.elements[n].setAttribute("disabled",!0);e=l}if(a("form",e))for(l=e,n=0;n<l.elements.length;n++)l.elements[n].disabled||"file"!==l.elements[n].type||(l.encoding=l.enctype="multipart/form-data",l.elements[n].setAttribute("name","file"));else{for(o in e)e.hasOwnProperty(o)&&a("input",e[o])&&"file"===e[o].type&&(l=e[o].form,l.encoding=l.enctype="multipart/form-data");l||(l=b.createElement("form"),b.body.appendChild(l),k=l);var t;for(o in e)if(e.hasOwnProperty(o)){var u=a("input",e[o])||a("textArea",e[o])||a("select",e[o]);if(u&&e[o].form===l)u&&e[o].name!==o&&(e[o].setAttribute("name",o),e[o].name=o);else{var v=l.elements[o];if(t)for(v instanceof NodeList||(v=[v]),n=0;n<v.length;n++)v[n].parentNode.removeChild(v[n]);t=b.createElement("input"),t.setAttribute("type","hidden"),t.setAttribute("name",o),t.value=u?e[o].value:a(null,e[o])?e[o].innerHTML||e[o].innerText:e[o],l.appendChild(t)}}for(n=0;n<l.elements.length;n++)t=l.elements[n],t.name in e||t.getAttribute("disabled")===!0||(t.setAttribute("disabled",!0),m.push(t))}l.setAttribute("method","POST"),l.setAttribute("target",h),l.target=h,d({},function(a){l.setAttribute("action",a),setTimeout(function(){l.submit(),setTimeout(function(){try{k&&k.parentNode.removeChild(k)}catch(a){try{console.error("HelloJS: could not remove iframe")}catch(b){}}for(var c=0;c<m.length;c++)m[c]&&(m[c].setAttribute("disabled",!1),m[c].disabled=!1)},0)},100)})}}(g,o),x=function(a,b){return function(c,d){if(d){var e;for(var f in d)if(c.indexOf(f)>-1){var g="[\\?\\&]"+f+"=[^\\&]*";e=new RegExp(g),c=c.replace(e,"")}}return c+(b(d)?"":(c.indexOf("?")>-1?"&":"?")+a(d))}}(v,r),y=function(){var b=a.location,c=/\/[^\/]+\/\.\.\//g;return function(a){if(!a)return b.href;for(0===a.indexOf("/")?a=b.protocol+(0===a.indexOf("//")?a:"//"+b.host+a):a.match(/^https?\:\/\//)||(a=(b.href.replace(/#.*/,"").replace(/\/[^\/]+$/,"/")+a).replace(/\/\.\//g,"/"));c.test(a);)c.lastIndex=0,a=a.replace(c,"/");return a}}(),z=function(){for(var c=[a.localStorage,a.sessionStorage],d=0,e=c[d++];e;)try{e.setItem(d,d),e.removeItem(d);break}catch(f){e=c[d++]}return e||(e={getItem:function(a){a+="=";for(var c=b.cookie.split(";"),d=0;d<c.length;d++){var e=c[d].replace(/(^\s+|\s+$)/,"");if(e&&0===e.indexOf(a))return e.substr(a.length)}return null},setItem:function(a,c){b.cookie=a+"="+c}}),function(a,b){var c=JSON.parse(e.getItem("hello"))||{};if(a&&"undefined"==typeof b)return c[a];if(a&&""===b)try{delete c[a]}catch(d){c[a]=null}else{if(!a)return c;c[a]=b}return e.setItem("hello",JSON.stringify(c)),c}}(),A=function(a){return function(b){if("object"!=typeof b)return[];for(var c=[],d=0;d<b.length;d++)b[d]&&0!==b[d].length&&-1===a(c,b[d])&&c.push(b[d]);return c}}(k),B=function(a){for(var b,c={},d=/([a-z\-]+):\s?(.*);?/gi;b=d.exec(a);)c[b[1]]=b[2];return c},C=function(a,b,c,d,e){return function(f,g,h,i,j){if("function"!=typeof g){var k=g;g=function(a,b){b(a(k,a))}}var l=new XMLHttpRequest,m=!1;"blob"===f&&(m=f,f="GET"),f=f.toUpperCase(),l.onload=function(){var a=l.response;try{a=JSON.parse(l.responseText)}catch(b){401===l.status&&(a={error:{code:"access_denied",message:l.statusText}})}var c=e(l.getAllResponseHeaders());c.statusCode=l.status,j(a||("DELETE"!==f?{error:{message:"Could not get resource"}}:{}),c)},l.onerror=function(){var a=l.responseText;try{a=JSON.parse(l.responseText)}catch(b){}j(a||{error:{code:"access_denied",message:"Could not get resource"}})};var n,o={};if("GET"===f||"DELETE"===f)a(i)||(o=b(o,i)),i=null;else if(i&&"string"!=typeof i&&!(i instanceof FormData)&&!c(i)){var p=new FormData;for(n in i)i.hasOwnProperty(n)&&(d("input",i[n])?"files"in i[n]&&i[n].files.length>0&&p.append(n,i[n].files[0]):i[n]instanceof Blob?p.append(n,i[n],i.name):p.append(n,i[n]));i=p}return g(o,function(a){if(l.open(f,a,!0),m&&("responseType"in l?l.responseType=m:l.overrideMimeType("text/plain; charset=x-user-defined")),h)for(var b in h)l.setRequestHeader(b,h[b]);l.send(i)}),l}}(r,t,i,g,B),D=function(a,b,c){function d(a,c,d){if(b(a.network,a),!("display"in a&&"page"===a.display)){if(d){var e=a.callback;try{delete a.callback}catch(f){}if(b(a.network,a),!(e in d))return void console.error("Error: Callback missing from parent window, snap!");try{d[e](a)}catch(f){return void console.error("Error thrown whilst executing parent callback, "+e,f)}}try{c.close()}catch(f){}c.addEventListener("load",function(){c.close()}),console.log("Trying to close window")}}return function(b,e){var f=b.location,g=function(a){f.assign?f.assign(a):b.location=a},h=a(c(f.search||""),c(f.hash||""));if(h&&"state"in h){try{var i=JSON.parse(h.state);h=a(h,i)}catch(j){console.error("Could not decode state parameter")}"access_token"in h&&h.access_token&&h.network?(h.expires_in&&0!==parseInt(h.expires_in,10)||(h.expires_in=0),h.expires_in=parseInt(h.expires_in,10),h.expires=(new Date).getTime()/1e3+(h.expires_in||31536e3),d(h,b,e)):"error"in h&&h.error&&h.network&&(h.error={code:h.error,message:h.error_message||h.error_description},d(h,b,e)),h&&h.callback&&"result"in h&&h.result&&h.callback in e&&e[h.callback](JSON.parse(h.result))}else if("oauth_redirect"in h)return void g(decodeURIComponent(h.oauth_redirect));if(h=c(f.search),h.code&&h.state||h.oauth_token&&h.proxy_url){h.redirect_uri=f.href.replace(/[\?\#].*$/,"");var k=JSON.parse(h.state),l=(k.oauth_proxy||h.proxy_url)+"?"+c(h);g(l)}}}(t,z,v),E=function(a){var c=b.createElement("a");return c.href=a,c},F=function(d,e){var f=b.documentElement,g=a.screen;return function(b,h,i,j){var k=a.screenLeft!==c?a.screenLeft:g.left,l=a.screenTop!==c?a.screenTop:g.top,m=a.innerWidth||f.clientWidth||g.width,n=a.innerHeight||f.clientHeight||g.height,o=(m-i)/2+k,p=(n-j)/2+l,q=function(b){var c=a.open(b,"_blank","resizeable=true,height="+j+",width="+i+",left="+o+",top="+p);return c.addEventListener&&c.addEventListener("loadstart",function(b){var f=b.url;if(0===f.indexOf(h)){var g=d(f),i={location:{assign:function(a){c.addEventListener("exit",function(){setTimeout(function(){q(a)},1e3)}),i.close()},search:g.search,hash:g.hash,href:f},close:function(){c.close&&c.close()}};e(i,a)}}),c&&c.focus&&c.focus(),c};return-1!=navigator.userAgent.indexOf("Safari")&&-1==navigator.userAgent.indexOf("Chrome")&&(b=h+"#oauth_redirect="+encodeURIComponent(encodeURIComponent(b))),q(b)}}(E,D),G=function(b,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){var z=function(a){return z.use(a)};return i(z,{settings:{redirect_uri:a.location.href.split("#")[0],response_type:"token",display:"popup",state:"",oauth_proxy:"https://auth-server.herokuapp.com/proxy",timeout:2e4,default_service:null,force:!0},service:function(a){return"undefined"!=typeof a?u("sync_service",a):u("sync_service")},services:{},use:function(a){var b=p(this);return b.settings=p(this.settings),a&&(b.settings.default_service=a),h.call(b),b},init:function(a,b){if(!a)return this.services;for(var c in a)a.hasOwnProperty(c)&&"object"!=typeof a[c]&&(a[c]={id:a[c]});this.services=o(this.services,a);for(c in this.services)this.services.hasOwnProperty(c)&&(this.services[c].scope=this.services[c].scope||{});return b&&(this.settings=o(this.settings,b),"redirect_uri"in b&&(this.settings.redirect_uri=t(b.redirect_uri))),this},login:function(){function b(a){var b;k||(k=!0,a.error?b="complete error failed auth.failed":(b="complete success login auth.login auth",u(a.network,a),a={network:a.network,authResponse:a}),c.emit(b,a))}var c=this.use(),e=d({network:"s",options:"o",callback:"f"},arguments);c.args=e;var f,h=e.options=o(c.settings,e.options||{});if(e.network=c.settings.default_service=e.network||c.settings.default_service,c.on("complete",e.callback),"string"!=typeof e.network||!(e.network in c.services))return c.emitAfter("error complete",{error:{code:"invalid_network",message:"The provided network was not recognized"}}),c;var i=c.services[e.network],k=!1,m=j(b);e.qs={client_id:i.id,response_type:h.response_type,redirect_uri:h.redirect_uri,display:h.display,scope:"basic",state:{client_id:i.id,network:e.network,display:h.display,callback:m,state:h.state,oauth_proxy:h.oauth_proxy}};var n=u(e.network),p=h.scope;if(p&&"string"!=typeof p&&(p=p.join(",")),p=(p?p+",":"")+e.qs.scope,n&&"scope"in n&&n.scope instanceof String&&(p+=","+n.scope),e.qs.state.scope=v(p.split(/[,\s]+/)).join(","),e.qs.scope=p.replace(/[^,\s]+/gi,function(a){return a in i.scope?i.scope[a]:""}).replace(/[,\s]+/gi,","),e.qs.scope=v(e.qs.scope.split(/,+/)).join(i.scope_delim||","),h.force===!1&&n&&"access_token"in n&&n.access_token&&"expires"in n&&n.expires>(new Date).getTime()/1e3){var q=g(n.scope||[],e.qs.state.scope||[]);if(0===q.length)return c.emit("notice","User already has a valid access_token"),c.emitAfter("complete success login",{network:e.network,authResponse:n}),c}if(e.qs.redirect_uri=t(e.qs.redirect_uri),i.oauth&&(e.qs.state.oauth=i.oauth),e.qs.state=JSON.stringify(e.qs.state),"login"in i&&"function"==typeof i.login&&i.login(e),f=1===parseInt(i.oauth.version,10)?s(h.oauth_proxy,e.qs):s(i.oauth.auth,e.qs),c.emit("notice","Authorization URL "+f),"none"===h.display)l(f);else if("popup"===h.display)var r=y(f,h.redirect_uri,h.window_width||500,h.window_height||500),w=setInterval(function(){r&&r.closed&&(clearInterval(w),b({error:{code:"cancelled",message:"Login has been cancelled"}}))},100);else a.location=f;return c},logout:function(){var a=this.use(),b=d({name:"s",options:"o",callback:"f"},arguments);if(b.options=b.options||{},a.on("complete",b.callback),b.name=b.name||a.settings.default_service,!b.name||b.name in a.services)if(b.name&&u(b.name)){var e=function(c){u(b.name,""),a.emitAfter("complete logout success auth.logout auth",o({network:b.name},c||{}))},f={};if(b.options.force){var g=a.services[b.name].logout;if(g)if("function"==typeof g&&(g=g(e)),"string"==typeof g)l(g),f.force=null,f.message="Logout success on providers site was indeterminate";else if(g===c)return a}e(f)}else if(b.name)a.emitAfter("complete error",{error:{code:"invalid_session",message:"There was no session to remove"}});else{for(var h in a.services)a.services.hasOwnProperty(h)&&a.logout(h);a.service(!1)}else a.emitAfter("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}});return a},getAuthResponse:function(a){return a=a||this.settings.default_service,a&&a in this.services?u(a)||null:(this.emit("complete error",{error:{code:"invalid_network",message:"The network was unrecognized"}}),null)},events:{}}),h.call(z),function(b){var c={},d={};b.on("auth.login, auth.logout",function(a){a&&"object"==typeof a&&a.network&&(c[a.network]=u(a.network)||{})}),function e(){var f=(new Date).getTime()/1e3,g=function(a){b.emit("auth."+a,{network:h,authResponse:i})};for(var h in b.services)if(b.services.hasOwnProperty(h)){if(!b.services[h].id)continue;var i=u(h)||{},j=b.services[h],k=c[h]||{};if(i&&"callback"in i){var l=i.callback;try{delete i.callback}catch(m){}u(h,i);try{a[l](i)}catch(m){}}if(i&&"expires"in i&&i.expires<f){var n=!("autorefresh"in j)||j.autorefresh;!n||h in d&&!(d[h]<f)?n||h in d||(g("expired"),d[h]=!0):(b.emit("notice",h+" has expired trying to resignin"),b.login(h,{display:"none",force:!1}),d[h]=f+600);continue}if(k.access_token===i.access_token&&k.expires===i.expires)continue;!i.access_token&&k.access_token?g("logout"):i.access_token&&!k.access_token?g("login"):i.expires!==k.expires&&g("update"),c[h]=i,h in d&&delete d[h]}setTimeout(e,1e3)}()}(z),x(a,a.opener||a.parent),z.api=function(){function b(b){if(g.data=e(i),"get"===g.method){for(var d,f=/[\?\&]([^=&]+)(=([^&]+))?/gi;d=f.exec(b);)g.data[d[1]]=d[3];b=b.replace(/\?.*/,"")}var l=q[{"delete":"del"}[g.method]||g.method]||{},p=l[b]||l["default"]||b,v=function(b){b=b.replace(/\@\{([a-z\_\-]+)(\|.+?)?\}/gi,function(a,b,c){var d=c?c.replace(/^\|/,""):"";return b in g.data?(d=g.data[b],delete g.data[b]):"undefined"==typeof c&&h.emitAfter("error",{error:{code:"missing_attribute_"+b,message:"The attribute "+b+" is missing from the request"}}),d}),b.match(/^https?:\/\//)||(b=q.base+b);var d={},e=function(a,e){a&&("function"==typeof a?a(d):d=o(d,a));var f=s(b,d||{});h.emit("notice","Request "+f),c(g.network,f,g.method,g.data,q.querystring,e)};if(!m(g.data)&&!("FileList"in a)&&k(g.data))return r(e,g.data,"form"in q?q.form(g):null,t),h;if("delete"===g.method){var f=t;t=function(a,b){f(!a||m(a)?{success:!0}:a,b)}}if("withCredentials"in new XMLHttpRequest&&(!("xhr"in q)||q.xhr&&q.xhr(g,d))){var i=w(g.method,e,g.headers,g.data,t);i.onprogress=function(a){h.emit("progress",a)},i.upload.onprogress=function(a){h.emit("uploadprogress",a)}}else{if(g.callbackID=j(),"jsonp"in q&&q.jsonp(g,d),"api"in q&&q.api(b,g,{access_token:u.access_token},t))return;"post"===g.method?(d.redirect_uri=h.settings.redirect_uri,d.state=JSON.stringify({callback:g.callbackID}),r(e,g.data,"form"in q?q.form(g):null,t,g.callbackID,h.settings.timeout)):(d=o(d,g.data),d.callback=g.callbackID,n(e,t,g.callbackID,h.settings.timeout))}};"function"==typeof p?p(g,v):v(p)}function c(a,b,c,d,e,f){var g=h.services[a],i=u?u.access_token:null,j=g.oauth&&1===parseInt(g.oauth.version,10)?h.settings.oauth_proxy:null;if(j)return void f(s(j,{path:b,access_token:i||"",then:"get"===c.toLowerCase()?"redirect":"proxy",method:c,suppress_response_codes:!0}));var k={access_token:i||""};e&&e(k),f(s(b,k))}var g=d({path:"s!",method:"s",data:"o",timeout:"i",callback:"f"},arguments),h=this.use();f(g),h.args=g,g.method=(g.method||"get").toLowerCase();var i=g.data=g.data||{};h.on("complete",g.callback),g.path=g.path.replace(/^\/+/,"");var l=(g.path.split(/[\/\:]/,2)||[])[0].toLowerCase();if(l in h.services){g.network=l;var p=new RegExp("^"+l+":?/?");g.path=g.path.replace(p,"")}g.network=h.settings.default_service=g.network||h.settings.default_service;var q=h.services[g.network];if(!q)return h.emitAfter("complete error",{error:{code:"invalid_network",message:"Could not match the service requested: "+g.network}}),h;g.timeout&&(h.settings.timeout=g.timeout),h.emit("notice","API request "+g.method.toUpperCase()+" '"+g.path+"' (request)",g);var t=function(a,c){if(q.wrap&&(g.path in q.wrap||"default"in q.wrap)){var d=g.path in q.wrap?g.path:"default",e=(new Date).getTime(),f=q.wrap[d](a,c,g);f&&(a=f),h.emit("notice","Processing took"+((new Date).getTime()-e))}h.emit("notice","API: "+g.method.toUpperCase()+" '"+g.path+"' (response)",a);var i=null;a&&"paging"in a&&a.paging.next&&(i=function(){b((a.paging.next.match(/^\?/)?g.path:"")+a.paging.next)}),h.emit("complete "+(!a||"error"in a?"error":"success"),a,i)};if(g.method in q&&g.path in q[g.method]&&q[g.method][g.path]===!1)return h.emitAfter("complete error",{error:{code:"invalid_path",message:"The provided path is not available on the selected network"}});var u=h.getAuthResponse(g.network);return b(g.path),h},a.hello=z,z}(d,e,f,j,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,C,D,F),H=function(b,c){function d(a){a&&"error"in a&&(a.error={code:"server_error",message:a.error.message||a.error})}function e(c){if(!("object"!=typeof c||"Blob"in a&&c instanceof Blob||"ArrayBuffer"in a&&c instanceof ArrayBuffer||"error"in c)){var d=c.root+c.path.replace(/\&/g,"%26");c.thumb_exists&&(c.thumbnail=b.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/thumbnails/"+d+"?format=jpeg&size=m")+"&access_token="+b.getAuthResponse("dropbox").access_token),c.type=c.is_dir?"folder":c.mime_type,c.name=c.path.replace(/.*\//g,""),c.is_dir?c.files="metadata/"+d:(c.downloadLink=b.settings.oauth_proxy+"?path="+encodeURIComponent("https://api-content.dropbox.com/1/files/"+d)+"&access_token="+b.getAuthResponse("dropbox").access_token,c.file="https://api-content.dropbox.com/1/files/"+d),c.id||(c.id=c.path.replace(/^\//,""))}}function f(a){return function(b,c){delete b.data.limit,c(a)}}function g(a){for(var b=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,c=a.match(b),d=atob(a.replace(b,"")),e=[],f=0;f<d.length;f++)e.push(d.charCodeAt(f));return new Blob([new Uint8Array(e)],{type:c[1]})}b.init({dropbox:{login:function(a){a.options.window_width=1e3,a.options.window_height=1e3},oauth:{version:"1.0",auth:"https://www.dropbox.com/1/oauth/authorize",request:"https://api.dropbox.com/1/oauth/request_token",token:"https://api.dropbox.com/1/oauth/access_token"},autorefresh:!1,base:"https://api.dropbox.com/1/",root:"sandbox",get:{me:"account/info","me/files":f("metadata/@{root|sandbox}/@{parent}"),"me/folder":f("metadata/@{root|sandbox}/@{id}"),"me/folders":f("metadata/@{root|sandbox}/"),"default":function(a,b){a.path.match("https://api-content.dropbox.com/1/files/")&&(a.method="blob"),b(a.path)}},post:{"me/files":function(a,b){var c=a.data.parent,d=a.data.name;a.data={file:a.data.file},"string"==typeof a.data.file&&(a.data.file=g(a.data.file)),b("https://api-content.dropbox.com/1/files_put/@{root|sandbox}/"+c+"/"+d)},"me/folders":function(a,b){var d=a.data.name;a.data={},b("fileops/create_folder?root=@{root|sandbox}&"+c({path:d}))}},del:{"me/files":"fileops/delete?root=@{root|sandbox}&path=@{id}","me/folder":"fileops/delete?root=@{root|sandbox}&path=@{id}"},wrap:{me:function(a){return d(a),a.uid?(a.name=a.display_name,a.first_name=a.name.split(" ")[0],a.last_name=a.name.split(" ")[1],a.id=a.uid,delete a.uid,delete a.display_name,a):a},"default":function(a){if(d(a),a.is_dir&&a.contents){a.data=a.contents,delete a.contents;for(var b=0;b<a.data.length;b++)a.data[b].root=a.root,e(a.data[b])}return e(a),a.is_deleted&&(a.success=!0),a}},xhr:function(a){if(a.data&&a.data.file){var b=a.data.file;b&&(a.data=b.files?b.files[0]:b)}return"delete"===a.method&&(a.method="post"),!0}}})}(G,v),I=function(a){return function(b){return a("iframe",{src:b,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body")}}(d),J=function(a,b,c,d,e,f){function g(a){return a.id&&(a.thumbnail=a.picture="http://graph.facebook.com/"+a.id+"/picture"),a}function h(a){if("data"in a)for(var b=0;b<a.data.length;b++)g(a.data[b]);return a}function i(b){if("data"in b)for(var c=a.getAuthResponse("facebook").access_token,d=0;d<b.data.length;d++){var e=b.data[d];e.picture&&(e.thumbnail=e.picture),e.cover_photo&&(e.thumbnail=j+e.cover_photo+"/picture?access_token="+c),"album"===e.type&&(e.files=e.photos=j+e.id+"/photos"),e.can_upload&&(e.upload_location=j+e.id+"/photos")}return b}var j="https://graph.facebook.com/";a.init({facebook:{name:"Facebook",login:function(a){a.options.window_width=580,a.options.window_height=400},oauth:{version:2,auth:"https://www.facebook.com/dialog/oauth/"},logout:function(b){var g=c(b),h=encodeURIComponent(a.settings.redirect_uri+"?"+f({callback:g,result:JSON.stringify({force:!0}),state:"{}"})),i=(e("facebook")||{}).access_token;return d("https://www.facebook.com/logout.php?next="+h+"&access_token="+i),i?void 0:!1},scope:{basic:"",email:"email",birthday:"user_birthday",events:"user_events",photos:"user_photos,user_videos",videos:"user_photos,user_videos",friends:"",files:"user_photos,user_videos",publish_files:"user_photos,user_videos,publish_stream",publish:"publish_stream",create_event:"create_event",offline_access:"offline_access"},base:"https://graph.facebook.com/",get:{me:"me","me/friends":"me/friends","me/following":"me/friends","me/followers":"me/friends","me/share":"me/feed","me/files":"me/albums","me/albums":"me/albums","me/album":"@{id}/photos","me/photos":"me/photos","me/photo":"@{id}"},post:{"me/share":"me/feed","me/albums":"me/albums","me/album":"@{id}/photos"},del:{"me/photo":"@{id}"},wrap:{me:g,"me/friends":h,"me/following":h,"me/followers":h,"me/albums":i,"me/files":i,"default":i},xhr:function(a,b){return("get"===a.method||"post"===a.method)&&(b.suppress_response_codes=!0),!0},jsonp:function(a,c){var d=a.method.toLowerCase();"get"===d||b(a.data)?"delete"===a.method&&(c.method="delete",a.method="post"):(a.data.method=d,a.method="get")},form:function(){return{callbackonload:!0}}}})}(G,p,o,I,z,v),K=function(a){function b(b,c,d){var e=(d?"":"flickr:")+"?method="+b+"&api_key="+a.init().flickr.id+"&format=json";for(var f in c)c.hasOwnProperty(f)&&(e+="&"+f+"="+c[f]);return e}function c(c){var d=a.getAuthResponse("flickr");d&&d.user_nsid?c(d.user_nsid):a.api(b("flickr.test.login"),function(a){c(i(a,"user").id)})}function d(a,d){return d||(d={}),function(e,f){c(function(c){d.user_id=c,f(b(a,d,!0))})}}function e(a,b){var c="http://www.flickr.com/images/buddyicon.gif";return a.nsid&&a.iconserver&&a.iconfarm&&(c="http://farm"+a.iconfarm+".staticflickr.com/"+a.iconserver+"/buddyicons/"+a.nsid+(b?"_"+b:"")+".jpg"),c}function f(a,b,c,d,e){return e=e?"_"+e:"","http://farm"+b+".staticflickr.com/"+c+"/"+a+"_"+d+e+".jpg"}function g(a){a&&a.stat&&"ok"!=a.stat.toLowerCase()&&(a.error={code:"invalid_request",message:a.message})}function h(a){if(a.photoset||a.photos){var b="photoset"in a?"photoset":"photos";a=i(a,b),k(a),a.data=a.photo,delete a.photo;for(var c=0;c<a.data.length;c++){var d=a.data[c];d.name=d.title,d.picture=f(d.id,d.farm,d.server,d.secret,""),d.source=f(d.id,d.farm,d.server,d.secret,"b"),d.thumbnail=f(d.id,d.farm,d.server,d.secret,"m")}}return a}function i(a,b){return b in a?a=a[b]:"error"in a||(a.error={code:"invalid_request",message:a.message||"Failed to get data from Flickr"}),a}function j(a){if(g(a),a.contacts){a=i(a,"contacts"),k(a),a.data=a.contact,delete a.contact;for(var b=0;b<a.data.length;b++){var c=a.data[b];c.id=c.nsid,c.name=c.realname||c.username,c.thumbnail=e(c,"m")}}return a}function k(a){a.page&&a.pages&&a.page!==a.pages&&(a.paging={next:"?page="+ ++a.page})}a.init({flickr:{name:"Flickr",oauth:{version:"1.0a",auth:"http://www.flickr.com/services/oauth/authorize?perms=read",request:"http://www.flickr.com/services/oauth/request_token",token:"http://www.flickr.com/services/oauth/access_token"},autorefresh:!1,base:"http://api.flickr.com/services/rest",get:{me:d("flickr.people.getInfo"),"me/friends":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/following":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/followers":d("flickr.contacts.getList",{per_page:"@{limit|50}"}),"me/albums":d("flickr.photosets.getList",{per_page:"@{limit|50}"}),"me/photos":d("flickr.people.getPhotos",{per_page:"@{limit|50}"})},wrap:{me:function(a){if(g(a),a=i(a,"person"),a.id){if(a.realname){a.name=a.realname._content;var b=a.name.split(" ");a.first_name=b[0],a.last_name=b[1]}a.thumbnail=e(a,"l"),a.picture=e(a,"l")}return a},"me/friends":j,"me/followers":j,"me/following":j,"me/albums":function(a){if(g(a),a=i(a,"photosets"),k(a),a.photoset){a.data=a.photoset,delete a.photoset;for(var c=0;c<a.data.length;c++){var d=a.data[c];d.name=d.title._content,d.photos="http://api.flickr.com/services/rest"+b("flickr.photosets.getPhotos",{photoset_id:d.id},!0)}}return a},"me/photos":function(a){return g(a),h(a)},"default":function(a){return g(a),h(a)}},xhr:!1,jsonp:function(a,b){"get"==a.method.toLowerCase()&&(delete b.callback,b.jsoncallback=a.callbackID)}}})}(G),L=function(a){function b(a){a.meta&&400===a.meta.code&&(a.error={code:"access_denied",message:a.meta.errorDetail})}function c(a){a&&a.id&&(a.thumbnail=a.photo.prefix+"100x100"+a.photo.suffix,a.name=a.firstName+" "+a.lastName,a.first_name=a.firstName,a.last_name=a.lastName,a.contact&&a.contact.email&&(a.email=a.contact.email))}a.init({foursquare:{name:"FourSquare",oauth:{version:2,auth:"https://foursquare.com/oauth2/authenticate"},querystring:function(a){var b=a.access_token;delete a.access_token,a.oauth_token=b,a.v=20121125},base:"https://api.foursquare.com/v2/",get:{me:"users/self","me/friends":"users/self/friends","me/followers":"users/self/friends","me/following":"users/self/friends"},wrap:{me:function(a){return b(a),a&&a.response&&(a=a.response.user,c(a)),a},"default":function(a){if(b(a),a&&"response"in a&&"friends"in a.response&&"items"in a.response.friends){a.data=a.response.friends.items,delete a.response;for(var d=0;d<a.data.length;d++)c(a.data[d])}return a}}}})}(G),M=function(a){function b(a,b){var c=b?b.statusCode:a&&"meta"in a&&"status"in a.meta&&a.meta.status;(401===c||403===c)&&(a.error={code:"access_denied",message:a.message||(a.data?a.data.message:"Could not get response")},delete a.message)}function c(a){a.id&&(a.thumbnail=a.picture=a.avatar_url,a.name=a.login)}function d(a,b){if(a.data&&a.data.length&&b&&b.Link){var c=b.Link.match(/&page=([0-9]+)/);c&&(a.paging={next:"?page="+c[1]})}}a.init({github:{name:"GitHub",oauth:{version:2,auth:"https://github.com/login/oauth/authorize",grant:"https://github.com/login/oauth/access_token"},base:"https://api.github.com/",get:{me:"user","me/friends":"user/following?per_page=@{limit|100}","me/following":"user/following?per_page=@{limit|100}","me/followers":"user/followers?per_page=@{limit|100}"},wrap:{me:function(a,d){return b(a,d),c(a),a},"default":function(a,e,f){if(b(a,e),"[object Array]"===Object.prototype.toString.call(a)){a={data:a},d(a,e,f);for(var g=0;g<a.data.length;g++)c(a.data[g])}return a}}}})}(G),N=function(c,d,e,f,g,h,i){function j(a){return parseInt(a,10)}function k(a){a.error||(a.name||(a.name=a.title||a.message),a.picture||(a.picture=a.thumbnailLink),a.thumbnail||(a.thumbnail=a.thumbnailLink),"application/vnd.google-apps.folder"===a.mimeType&&(a.type="folder",a.files="https://www.googleapis.com/drive/v2/files?q=%22"+a.id+"%22+in+parents"))}function l(a){o(a);var b=function(a){var b,c=a.media$group.media$content.length?a.media$group.media$content[0]:{},d=0,e={id:a.id.$t,name:a.title.$t,description:a.summary.$t,updated_time:a.updated.$t,created_time:a.published.$t,picture:c?c.url:null,thumbnail:c?c.url:null,width:c.width,height:c.height};if("link"in a)for(d=0;d<a.link.length;d++){var f=a.link[d];if(f.rel.match(/\#feed$/)){e.upload_location=e.files=e.photos=f.href;
break}}if("category"in a&&a.category.length)for(b=a.category,d=0;d<b.length;d++)b[d].scheme&&b[d].scheme.match(/\#kind$/)&&(e.type=b[d].term.replace(/^.*?\#/,""));if("media$thumbnail"in a.media$group&&a.media$group.media$thumbnail.length){for(b=a.media$group.media$thumbnail,e.thumbnail=a.media$group.media$thumbnail[0].url,e.images=[],d=0;d<b.length;d++)e.images.push({source:b[d].url,width:b[d].width,height:b[d].height});b=a.media$group.media$content.length?a.media$group.media$content[0]:null,b&&e.images.push({source:b.url,width:b.width,height:b.height})}return e},c=[];if("feed"in a&&"entry"in a.feed){for(d=0;d<a.feed.entry.length;d++)c.push(b(a.feed.entry[d]));a.data=c,delete a.feed}else{if("entry"in a)return b(a.entry);if("items"in a){for(var d=0;d<a.items.length;d++)k(a.items[d]);a.data=a.items,delete a.items}else k(a)}return a}function m(a){a.name=a.displayName||a.name,a.picture=a.picture||(a.image?a.image.url:null),a.thumbnail=a.picture}function n(a){o(a);var b=[];if("feed"in a&&"entry"in a.feed){for(var d=c.getAuthResponse("google").access_token,e=0;e<a.feed.entry.length;e++){var f=a.feed.entry[e],g=f.link&&f.link.length>0?f.link[0].href+"?access_token="+d:null;b.push({id:f.id.$t,name:f.title.$t,email:f.gd$email&&f.gd$email.length>0?f.gd$email[0].address:null,updated_time:f.updated.$t,picture:g,thumbnail:g})}a.data=b,delete a.feed}return a}function o(a){if("feed"in a&&a.feed.openSearch$itemsPerPage){var b=j(a.feed.openSearch$itemsPerPage.$t),c=j(a.feed.openSearch$startIndex.$t),d=j(a.feed.openSearch$totalResults.$t);d>c+b&&(a.paging={next:"?start="+(c+b)})}else"nextPageToken"in a&&(a.paging={next:"?pageToken="+a.nextPageToken})}function p(){function b(a){var b=new FileReader;b.onload=function(b){c(btoa(b.target.result),a.type+g+"Content-Transfer-Encoding: base64")},b.readAsBinaryString(a)}function c(a,b){d.push(g+"Content-Type: "+b+g+g+a),f--,i()}var d=[],e=(1e10*Math.random()).toString(32),f=0,g="\r\n",h=g+"--"+e,i=function(){},j=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i;this.append=function(d,e){"string"!=typeof d&&"length"in Object(d)||(d=[d]);for(var h=0;h<d.length;h++){f++;var i=d[h];if(i instanceof a.File||i instanceof a.Blob)b(i);else if("string"==typeof i&&i.match(j)){var k=i.match(j);c(i.replace(j,""),k[1]+g+"Content-Transfer-Encoding: base64")}else c(i,e)}},this.onready=function(a){(i=function(){0===f&&(d.unshift(""),d.push("--"),a(d.join(h),e),d=[])})()}}function q(b,c,e,f,h){var i="https://content.googleapis.com";u||(w=String(parseInt(1e8*Math.random(),10)),u=d("iframe",{src:i+"/static/proxy.html?jsh=m%3B%2F_%2Fscs%2Fapps-static%2F_%2Fjs%2Fk%3Doz.gapi.en.mMZgig4ibk0.O%2Fm%3D__features__%2Fam%3DEQ%2Frt%3Dj%2Fd%3D1%2Frs%3DAItRSTNZBJcXGialq7mfSUkqsE3kvYwkpQ#parent="+a.location.origin+"&rpctoken="+w,style:{position:"absolute",left:"-1000px",bottom:0,height:"1px",width:"1px"}},"body"),s(a,"message",function(a){if(a.origin===i){var b;try{b=JSON.parse(a.data)}catch(c){return}if(b&&b.s&&b.s==="ready:"+w){v=!0,x=0;for(var d=0;d<y.length;d++)y[d]()}}}));var j=function(){var d=a.navigator,j=++x,k=g(c.match(/\?.+/)[0]),l=k.access_token;delete k.access_token;var m=JSON.stringify({s:"makeHttpRequests",f:"..",c:j,a:[[{key:"gapiRequest",params:{url:c.replace(/(^https?\:\/\/[^\/]+|\?.+$)/,""),httpMethod:b.toUpperCase(),body:f,headers:{Authorization:":Bearer "+l,"Content-Type":e["content-type"],"X-Origin":a.location.origin,"X-ClientDetails":"appVersion="+d.appVersion+"&platform="+d.platform+"&userAgent="+d.userAgent},urlParams:k,clientName:"google-api-javascript-client",clientVersion:"1.1.0-beta"}}]],t:w,l:!1,g:!0,r:".."});s(a,"message",function n(b){if(b.origin===i)try{var c=JSON.parse(b.data);c.t===w&&c.a[0]===j&&(t(a,"message",n),h(JSON.parse(JSON.parse(c.a[1]).gapiRequest.data.body)))}catch(d){h({error:{code:"request_error",message:"Failed to post to Google"}})}}),u.contentWindow.postMessage(m,"*")};v?j():y.push(j)}function r(b,c){var d={};b.data&&b.data instanceof a.HTMLInputElement&&(b.data={file:b.data}),!b.data.name&&Object(Object(b.data.file).files).length&&"post"===b.method&&(b.data.name=b.data.file.files[0].name),"post"===b.method?b.data={title:b.data.name,parents:[{id:b.data.parent||"root"}],file:b.data.file}:(d=b.data,b.data={},d.parent&&(b.data.parents=[{id:b.data.parent||"root"}]),d.file&&(b.data.file=d.file),d.name&&(b.data.title=d.name)),c("upload/drive/v2/files"+(d.id?"/"+d.id:"")+"?uploadType=multipart")}var s,t;b.removeEventListener?(s=function(a,b,c){a.addEventListener(b,c)},t=function(a,b,c){a.removeEventListener(b,c)}):b.detachEvent&&(t=function(a,b,c){a.detachEvent("on"+b,c)},s=function(a,b,c){a.attachEvent("on"+b,c)});var u,v,w,x,y=[],z="https://www.google.com/m8/feeds/contacts/default/full?alt=json&max-results=@{limit|1000}&start-index=@{start|1}";c.init({google:{name:"Google Plus",login:function(a){"none"===a.qs.display&&(a.qs.display="")},oauth:{version:2,auth:"https://accounts.google.com/o/oauth2/auth"},scope:{basic:"https://www.googleapis.com/auth/plus.me https://www.googleapis.com/auth/userinfo.email https://www.googleapis.com/auth/userinfo.profile",email:"",birthday:"",events:"",photos:"https://picasaweb.google.com/data/",videos:"http://gdata.youtube.com",friends:"https://www.google.com/m8/feeds, https://www.googleapis.com/auth/plus.login",files:"https://www.googleapis.com/auth/drive.readonly",publish:"",publish_files:"https://www.googleapis.com/auth/drive",create_event:"",offline_access:""},scope_delim:" ",base:"https://www.googleapis.com/",get:{me:"oauth2/v1/userinfo?alt=json","me/friends":"plus/v1/people/me/people/visible?maxResults=@{limit|100}","me/following":z,"me/followers":z,"me/contacts":z,"me/share":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/feed":"plus/v1/people/me/activities/public?maxResults=@{limit|100}","me/albums":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&max-results=@{limit|100}&start-index=@{start|1}","me/album":function(a,b){var c=a.data.id;delete a.data.id,b(c.replace("/entry/","/feed/"))},"me/photos":"https://picasaweb.google.com/data/feed/api/user/default?alt=json&kind=photo&max-results=@{limit|100}&start-index=@{start|1}","me/files":"drive/v2/files?q=%22@{parent|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}","me/folders":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+mimeType+=+%22application/vnd.google-apps.folder%22+and+trashed=false&maxResults=@{limit|100}","me/folder":"drive/v2/files?q=%22@{id|root}%22+in+parents+and+trashed=false&maxResults=@{limit|100}"},post:{"me/files":r,"me/folders":function(a,b){a.data={title:a.data.name,parents:[{id:a.data.parent||"root"}],mimeType:"application/vnd.google-apps.folder"},b("drive/v2/files")}},put:{"me/files":r},del:{"me/files":"drive/v2/files/@{id}","me/folder":"drive/v2/files/@{id}"},wrap:{me:function(a){return a.id&&(a.last_name=a.family_name||(a.name?a.name.familyName:null),a.first_name=a.given_name||(a.name?a.name.givenName:null),m(a)),a},"me/friends":function(a){if(a.items){o(a),a.data=a.items,delete a.items;for(var b=0;b<a.data.length;b++)m(a.data[b])}return a},"me/contacts":n,"me/followers":n,"me/following":n,"me/share":function(a){return o(a),a.data=a.items,delete a.items,a},"me/feed":function(a){return o(a),a.data=a.items,delete a.items,a},"me/albums":l,"me/photos":l,"default":l},xhr:function(a){if("post"===a.method||"put"===a.method){if(a.data&&f(a.data)||a.data.file)return a.cors_support=a.cors_support||!0,!1;a.data=JSON.stringify(a.data),a.headers={"content-type":"application/json"}}return!0},api:function(a,b,c,d){if("get"!==b.method){"file"in b.data&&e("input",b.data.file)&&!("files"in b.data.file)&&d({error:{code:"request_invalid",message:"Sorry, can't upload your files to Google Drive in this browser"}});var f;if("file"in b.data&&(f=b.data.file,delete b.data.file,"object"==typeof f&&"files"in f&&(f=f.files),!f||!f.length))return void d({error:{code:"request_invalid",message:"There were no files attached with this request to upload"}});var g=new p;return g.append(JSON.stringify(b.data),"application/json"),f&&g.append(f),g.onready(function(e,f){b.cors_support?i(b.method,h(a,c),{"content-type":'multipart/related; boundary="'+f+'"'},e,d):q(b.method,h(a,c),{"content-type":'multipart/related; boundary="'+f+'"'},e,d)}),!0}}}})}(G,d,g,p,v,x,C),O=function(a){function b(a){a&&"meta"in a&&"error_type"in a.meta&&(a.error={code:a.meta.error_type,message:a.meta.error_message})}function c(a){if(e(a),a&&"data"in a)for(var b=0;b<a.data.length;b++)d(a.data[b]);return a}function d(a){a.id&&(a.thumbnail=a.profile_picture,a.name=a.full_name||a.username)}function e(a){"pagination"in a&&(a.paging={next:a.pagination.next_url},delete a.pagination)}a.init({instagram:{name:"Instagram",login:function(a){a.qs.display=""},oauth:{version:2,auth:"https://instagram.com/oauth/authorize/"},scope:{basic:"basic",friends:"relationships"},scope_delim:" ",base:"https://api.instagram.com/v1/",get:{me:"users/self","me/feed":"users/self/feed?count=@{limit|100}","me/photos":"users/self/media/recent?min_id=0&count=@{limit|100}","me/friends":"users/self/follows?count=@{limit|100}","me/following":"users/self/follows?count=@{limit|100}","me/followers":"users/self/followed-by?count=@{limit|100}"},wrap:{me:function(a){return b(a),"data"in a&&(a.id=a.data.id,a.thumbnail=a.data.profile_picture,a.name=a.data.full_name||a.data.username),a},"me/friends":c,"me/following":c,"me/followers":c,"me/photos":function(a){if(b(a),e(a),"data"in a)for(var c=0;c<a.data.length;c++){var d=a.data[c];"image"!==d.type&&(delete a.data[c],c--),d.thumbnail=d.images.thumbnail.url,d.picture=d.images.standard_resolution.url,d.name=d.caption?d.caption.text:null}return a},"default":function(a){return e(a),a}},xhr:!1}})}(G),P=function(a){function b(a){a&&"errorCode"in a&&(a.error={code:a.status,message:a.message})}function c(a){a.error||(a.first_name=a.firstName,a.last_name=a.lastName,a.name=a.formattedName||a.first_name+" "+a.last_name,a.thumbnail=a.pictureUrl)}function d(a){if(b(a),e(a),a.values){a.data=a.values;for(var d=0;d<a.data.length;d++)c(a.data[d]);delete a.values}return a}function e(a){"_count"in a&&"_start"in a&&a._count+a._start<a._total&&(a.paging={next:"?start="+(a._start+a._count)+"&count="+a._count})}a.init({linkedin:{login:function(a){a.qs.response_type="code"},oauth:{version:2,auth:"https://www.linkedin.com/uas/oauth2/authorization",grant:"https://www.linkedin.com/uas/oauth2/accessToken"},scope:{basic:"r_fullprofile",email:"r_emailaddress",friends:"r_network",publish:"rw_nus"},scope_delim:" ",querystring:function(a){a.oauth2_access_token=a.access_token,delete a.access_token},base:"https://api.linkedin.com/v1/",get:{me:"people/~:(picture-url,first-name,last-name,id,formatted-name)","me/friends":"people/~/connections?count=@{limit|500}","me/followers":"people/~/connections?count=@{limit|500}","me/following":"people/~/connections?count=@{limit|500}","me/share":"people/~/network/updates?count=@{limit|250}"},post:{},wrap:{me:function(a){return b(a),c(a),a},"me/friends":d,"me/following":d,"me/followers":d,"me/share":function(a){if(b(a),e(a),a.values){a.data=a.values,delete a.values;for(var d=0;d<a.data.length;d++){var f=a.data[d];c(f),f.message=f.headline}}return a},"default":function(a){b(a),e(a)}},jsonp:function(a,b){b.format="jsonp","get"===a.method&&(b["error-callback"]="?")},xhr:!1}})}(G),Q=function(a){function b(a){a.id&&(a.picture=a.avatar_url,a.thumbnail=a.avatar_url,a.name=a.username||a.full_name)}function c(a){"next_href"in a&&(a.paging={next:a.next_href})}a.init({soundcloud:{name:"SoundCloud",oauth:{version:2,auth:"https://soundcloud.com/connect"},autorefresh:!1,querystring:function(a){var b=a.access_token;delete a.access_token,a.oauth_token=b,a["_status_code_map[302]"]=200},base:"https://api.soundcloud.com/",get:{me:"me.json","me/friends":"me/followings.json","me/followers":"me/followers.json","me/following":"me/followings.json","default":function(a,b){b(a.path+".json")}},wrap:{me:function(a){return b(a),a},"default":function(a){if(a instanceof Array){a={data:a};for(var d=0;d<a.data.length;d++)b(a.data[d])}return c(a),a}}}})}(G),R=function(a){function b(a){if(a.id){if(a.name){var b=a.name.split(" ");a.first_name=b[0],a.last_name=b[1]}a.thumbnail=a.profile_image_url}}function c(a){if(d(a),e(a),a.users){a.data=a.users;for(var c=0;c<a.data.length;c++)b(a.data[c]);delete a.users}return a}function d(a){if(a.errors){var b=a.errors[0];a.error={code:"request_failed",message:b.message}}}function e(a){"next_cursor_str"in a&&(a.paging={next:"?cursor="+a.next_cursor_str})}a.init({twitter:{oauth:{version:"1.0a",auth:"https://twitter.com/oauth/authorize",request:"https://twitter.com/oauth/request_token",token:"https://twitter.com/oauth/access_token"},autorefresh:!1,base:"https://api.twitter.com/1.1/",get:{me:"account/verify_credentials.json","me/friends":"friends/list.json?count=@{limit|200}","me/following":"friends/list.json?count=@{limit|200}","me/followers":"followers/list.json?count=@{limit|200}","me/share":"statuses/user_timeline.json?count=@{limit|200}"},post:{"me/share":function(a,b){var c=a.data;a.data=null,b("statuses/update.json?include_entities=1&status="+c.message)}},wrap:{me:function(a){return d(a),b(a),a},"me/friends":c,"me/followers":c,"me/following":c,"me/share":function(a){return d(a),e(a),!a.error&&"length"in a?{data:a}:a},"default":function(a){return e(a),a}},xhr:function(a){return"get"!==a.method}}})}(G),S=function(a,b){function c(b){if(b.id){var c=a.getAuthResponse("windows").access_token;if(b.emails&&(b.email=b.emails.preferred),b.is_friend!==!1){var d=b.user_id||b.id;b.thumbnail=b.picture="https://apis.live.net/v5.0/"+d+"/picture?access_token="+c}}}function d(a){if("data"in a)for(var b=0;b<a.data.length;b++)c(a.data[b]);return a}function e(a){for(var b=/^data\:([^;,]+(\;charset=[^;,]+)?)(\;base64)?,/i,c=a.match(b),d=atob(a.replace(b,"")),e=[],f=0;f<d.length;f++)e.push(d.charCodeAt(f));return new Blob([new Uint8Array(e)],{type:c[1]})}a.init({windows:{name:"Windows live",oauth:{version:2,auth:"https://login.live.com/oauth20_authorize.srf"},logout:function(){return"http://login.live.com/oauth20_logout.srf?ts="+(new Date).getTime()},scope:{basic:"wl.signin,wl.basic",email:"wl.emails",birthday:"wl.birthday",events:"wl.calendars",photos:"wl.photos",videos:"wl.photos",friends:"wl.contacts_emails",files:"wl.skydrive",publish:"wl.share",publish_files:"wl.skydrive_update",create_event:"wl.calendars_update,wl.events_create",offline_access:"wl.offline_access"},base:"https://apis.live.net/v5.0/",get:{me:"me","me/friends":"me/friends","me/following":"me/contacts","me/followers":"me/friends","me/contacts":"me/contacts","me/albums":"me/albums","me/album":"@{id}/files","me/photo":"@{id}","me/files":"@{parent|me/skydrive}/files","me/folders":"@{id|me/skydrive}/files","me/folder":"@{id|me/skydrive}/files"},post:{"me/albums":"me/albums","me/album":"@{id}/files","me/folders":"@{id|me/skydrive/}","me/files":"@{parent|me/skydrive/}/files"},del:{"me/album":"@{id}","me/photo":"@{id}","me/folder":"@{id}","me/files":"@{id}"},wrap:{me:function(a){return c(a),a},"me/friends":d,"me/contacts":d,"me/followers":d,"me/following":d,"me/albums":function(a){if("data"in a)for(var b=0;b<a.data.length;b++){var c=a.data[b];c.photos=c.files="https://apis.live.net/v5.0/"+c.id+"/photos"}return a},"default":function(a){if("data"in a)for(var b=0;b<a.data.length;b++){var c=a.data[b];c.picture&&(c.thumbnail=c.picture)}return a}},xhr:function(a){return"get"===a.method||"delete"===a.method||b(a.data)||("string"==typeof a.data.file?a.data.file=e(a.data.file):(a.data=JSON.stringify(a.data),a.headers={"Content-Type":"application/json"})),!0},jsonp:function(a){"get"===a.method.toLowerCase()||b(a.data)||(a.data.method=a.method.toLowerCase(),a.method="get")}}})}(G,p),T=function(a){function b(a){a&&"meta"in a&&"error_type"in a.meta&&(a.error={code:a.meta.error_type,message:a.meta.error_message})}function c(a){b(a),d(a);var c,e;if(a.query&&a.query.results&&a.query.results.contact){a.data=a.query.results.contact,delete a.query,a.data instanceof Array||(a.data=[a.data]);for(var f=0;f<a.data.length;f++){c=a.data[f],c.id=null;for(var g=0;g<c.fields.length;g++)e=c.fields[g],"email"===e.type&&(c.email=e.value),"name"===e.type&&(c.first_name=e.value.givenName,c.last_name=e.value.familyName,c.name=e.value.givenName+" "+e.value.familyName),"yahooid"===e.type&&(c.id=e.value)}}return a}function d(a){a.query&&a.query.count&&(a.paging={next:"?start="+a.query.count})}var e=function(a){return"https://query.yahooapis.com/v1/yql?q="+(a+" limit @{limit|100} offset @{start|0}").replace(/\s/g,"%20")+"&format=json"};a.init({yahoo:{oauth:{version:"1.0a",auth:"https://api.login.yahoo.com/oauth/v2/request_auth",request:"https://api.login.yahoo.com/oauth/v2/get_request_token",token:"https://api.login.yahoo.com/oauth/v2/get_token"},autorefresh:!1,base:"https://social.yahooapis.com/v1/",get:{me:e("select * from social.profile(0) where guid=me"),"me/friends":e("select * from social.contacts(0) where guid=me"),"me/following":e("select * from social.contacts(0) where guid=me")},wrap:{me:function(a){return b(a),a.query&&a.query.results&&a.query.results.profile&&(a=a.query.results.profile,a.id=a.guid,a.name=a.givenName+" "+a.familyName,a.last_name=a.familyName,a.first_name=a.givenName,a.email=a.emails?a.emails.handle:null,a.thumbnail=a.image?a.image.imageUrl:null),a},"me/friends":c,"me/following":c,"default":function(a){return d(a),a}},xhr:!1}})}(G);!function(a){return a}(G,H,J,K,L,M,N,O,P,Q,R,S,T)}}(window,document),"function"==typeof define&&define.amd&&define(function(){return hello});